name: 'API-$(majorVersion).$(minorVersion).$(patchVersion).$(rev:r)'

trigger:
- release/*
- R_*
- hotfix/*
- feature/*
- main
- S_*

pool:
  vmImage: 'windows-latest'

variables:
  majorVersion: 0
  minorVersion: 0
  patchVersion: 1
  buildConfiguration: 'Release'
  projectName: 'AzureDemoProj'
  publishArtifact: 'True'

steps:

- task: DotNetCoreCLI@2
  displayName: 'Build project'
  inputs:
    command: 'build'
    projects: '*/.csproj'
    arguments: --configuration $(buildConfiguration)


- task: AzureRmWebAppDeployment@4
  inputs:
    ConnectionType: 'AzureRM'
    azureSubscription: 'Azure subscription 1(50de5f22-80d8-4e7a-934b-5f557c4d3f78)'
    appType: 'webApp'
    WebAppName: 'demo-training'
    packageForLinux: '$(System.DefaultWorkingDirectory)/webApp.zip'